#!/bin/bash

geth=~/go-ethereum/build/bin/geth
date=$(date +%s)
lottery_file=bin/lottery_${date}.js

# TODO make args of those vars
owner="0xe581c6f0fae3bc426acfc660b36a7caf90f27987"
lottery="0xa55e4642e1630d6b49d6727b700dc15cac19fe72"
result="5"

. bin/compile

sed -e 's/LOTTERY/'$lottery'/' \
    -e 's/RESULT/'$result'/' \
    -e 's/OWNER/'$owner'/' \
    -e 's/ABI/'$abi'/' bin/lottery.tpl.js > $lottery_file

echo "LOTTERY COMMAND"
echo $geth --testnet --datadir ~/eth-testnet js $lottery_file --unlock $owner
